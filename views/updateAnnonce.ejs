<%- include('parts/header.ejs')%>

    <head>
        <link rel="stylesheet" href="/assets/css/style.css">
        <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
        <link
            href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&family=Poppins:wght@600;700&display=swap"
            rel="stylesheet" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    </head>

    <body>
        <div class="container p-5 ">
            <form name="form2" id="ff2" method="post" action="/updateAnnonce" enctype="multipart/form-data">
                <div class="house">

                </div>
                <section class="border">
                    <fieldset>
                        <legend>Logement </legend>
                        <div class="input-group mb-3">
                            <label class="input-group-text" for="inputGroupSelect01">Titre</label>
                            <input type="text" class="form-control" placeholder="Titre:" name="titre" id="firstname" value="<%=Annonceupdate.titre%>"
                                aria-describedby="emailHelp" required>

                        </div>
                        <div class="input-group mb-3">
                            <label class="input-group-text" for="inputGroupSelect01">Types : </label>
                            <select class="form-select" name="types" required>
                                <option value="">-Sélectionner-</option>
                                <option value="1" <% if (Annonceupdate.types==1) { %> selected <% } %>>Vente</option>
                                <option value="2" <% if (Annonceupdate.types==2) { %> selected <% } %>>Location</option>
                                <option value="3" <% if (Annonceupdate.types==3) { %> selected <% } %>>Colocation</option>
                            </select>
                        </div>

                        <div class="input-group mb-3">
                            <label class="input-group-text" for="inputGroupSelect01">Colocs Déja présents : </label>
                            <select class="form-select" name="colocs" required>
                                <option value="">-Sélectionner-</option>
                                <option value="0" <%=Annonceupdate.colocs===0 ? 'selected' : '' %>>0 (inoccupé)</option>
                                <option value="1" <%=Annonceupdate.colocs===1 ? 'selected' : '' %>>1</option>
                                <option value="2" <%=Annonceupdate.colocs===2 ? 'selected' : '' %>>2</option>
                                <option value="3" <%=Annonceupdate.colocs===3 ? 'selected' : '' %>>3</option>
                                <option value="4" <%=Annonceupdate.colocs===4 ? 'selected' : '' %>>4</option>
                                <option value="5" <%=Annonceupdate.colocs===5 ? 'selected' : '' %>>5</option>
                            </select>
                        </div>

                    <div class="input-group mb-3">
                        <label class="input-group-text" for="inputGroupSelect01">Logement:</label>
                        <select class="form-select" name="logement" required>
                            <option value="">-Sélectionner-</option>
                            <option value="Maison" <%=Annonceupdate.logement==='Maison' ? 'selected' : '' %>>Maison</option>
                            <option value="Studio" <%=Annonceupdate.logement==='Studio' ? 'selected' : '' %>>Studio</option>
                            <option value="Appartement" <%=Annonceupdate.logement==='Appartement' ? 'selected' : '' %>>Appartement</option>
                        </select>
                        </div>
                    <div class="input-group mb-3">
                        <label class="input-group-text" for="inputGroupSelect01"> Nombre de piéces :</label>
                        <select class="form-select" name="piece" required>
                            <option value="">-Sélectionner-</option>
                            <option value="1" <%=Annonceupdate.piece==='1' ? 'selected' : '' %>>1 pièce</option>
                            <option value="2" <%=Annonceupdate.piece==='2' ? 'selected' : '' %>>2 pièces</option>
                            <option value="3" <%=Annonceupdate.piece==='3' ? 'selected' : '' %>>3 pièces</option>
                            <option value="4" <%=Annonceupdate.piece==='4' ? 'selected' : '' %>>4 pièces</option>
                        </select>
                    </div>

                        <div class="input-group mb-3">
                            <label class="input-group-text" for="inputGroupSelect01"> Superficie en (m²)</label>
                            <input type="tel" class="form-control" name="superficie" id="firstname"  value="<%=Annonceupdate.superficie%>"
                                aria-describedby="emailHelp" required>

                        </div>
                    </fieldset>
                </section>
                <section>
                    <fieldset class="border">
                        <legend>Localisation</legend>
                        <div class="input-group mb-3">
                            <!-- Search input -->
                            <label class="input-group-text" for="inputGroupSelect01">Adresse </label>
                            <input id="searchInput" class="form-control" type="text" placeholder="Enter a location" value="<%=Annonceupdate.adresse%>"
                                name="adresse" required>
                        </div>
                        <!-- Google map -->
                        <div id="map">

                        </div>
                        <iframe class="position-relative w-100 h-100"
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3001156.4288297426!2d-78.01371936852176!3d42.72876761954724!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4ccc4bf0f123a5a9%3A0xddcfc6c1de189567!2sNew%20York%2C%20USA!5e0!3m2!1sen!2sbd!4v1603794290143!5m2!1sen!2sbd"
                            frameborder="0" style="min-height: 450px; border: 0" allowfullscreen="" aria-hidden="false"
                            tabindex="0">
                            <script
                                src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCwAV3er3WO7SErBxg29ihtKoJDhvhBlLg"
                                async defer></script>
                        </iframe>

                <section class="border">
                    <fieldset>
                        <legend>Chambre</legend>
                        <div class="input-group mb-3">
                            <label class="input-group-text" for="inputGroupSelect01"> Taille en (m²)</label>
                            <input type="tel" class="form-control" name="taille" id="firstname"  value="<%=Annonceupdate.taille%>"
                                aria-describedby="emailHelp" required>
                        </div>
                        <div class="input-group mb-3">
                            <label class="input-group-text" for="inputGroupSelect01">Disponible à partir du:</label>
                            <div class="d-flex align-items-center">
                                <% const date=new Date(Annonceupdate.date); %>
                                    <select class="form-select me-2" name="day" required>
                                        <% for (let i=1; i <=31; i++) { %>
                                            <option value="<%= i %>" <% if (i===date.getDate()) { %>selected<% } %>>
                                                    <%= i %>
                                            </option>
                                            <% } %>
                                    </select>
                                    <select class="form-select me-2" name="month" required>
                                        <% const months=['Jan', 'Feb' , 'Mar' , 'Apr' , 'May' , 'Jun' , 'Jul' , 'Aug' , 'Sep' , 'Oct' , 'Nov'
                                            , 'Dec' ]; %>
                                            <% for (let i=0; i < 12; i++) { %>
                                                <option value="<%= i %>" <% if (i===date.getMonth()) { %>selected<% } %>>
                                                        <%= months[i] %>
                                                </option>
                                                <% } %>
                                    </select>
                                    <select class="form-select" name="year" required>
                                        <% const currentYear=new Date().getFullYear(); %>
                                            <% for (let i=currentYear; i <=currentYear + 5; i++) { %>
                                                <option value="<%= i %>" <% if (i===date.getFullYear()) { %>selected<% } %>>
                                                        <%= i %>
                                                </option>
                                                <% } %>
                                    </select>
                            </div>
                        </div>

                    </fieldset>
                </section>

                <section class="border">
                    <fieldset>
                        <legend>Montant</legend>
                        <div class="input-group mb-3">
                            <label class="input-group-text" for="inputGroupSelect01"> Montant Total en (DT) :</label>
                            <input type="text" class="form-control" name="montant" id="firstname" value="<%=Annonceupdate.montant%>"
                                aria-describedby="emailHelp" required>
                        </div>
                        <div class="input-group mb-3">
                            <label class="input-group-text" for="inputGroupSelect01"> Caution en (DT) : </label>
                            <input type="text" class="form-control" name="caution" id="firstname" value="<%=Annonceupdate.caution%>" required>
                        </div>
                    </fieldset>
                </section>

                <section class="border">
                    <fieldset>
                        <legend>Contact</legend>
                        <div class="input-group mb-3">
                            <label class="input-group-text" for="inputGroupSelect01">Email</label>
                            <input type="email" class="form-control" name="email" id="firstname" value="<%=Annonceupdate.email%>"
                                aria-describedby="emailHelp" pattern=".+@gmail\.com" required>

                        </div>
                        <div class="input-group mb-3">
                            <label class="input-group-text" for="inputGroupSelect01">Téléphone</label>
                            <input type="tel" class="form-control" name="tel" id="firstname" value="<%=Annonceupdate.tel%>"
                                aria-describedby="emailHelp" required>

                        </div>
                    </fieldset>
                </section>

                <section class="border">
                    <fieldset>
                        <legend>Description</legend>
                        <div class="input-group mb-3">
                            <textarea class="cmb2_textarea" name="text" class="form-control" id="property_text"
                                cols="150" rows="10" data-hash='29me9n24e85g' required="required"><%= Annonceupdate.text%>
                            </textarea>


                        </div>
                        </fieldest>
                </section>

                <section class="border">
                    <fieldset>
                        <img src="/img/<%=Annonceupdate.photo%>" width="100" height="100">
                        
                        <input type="hidden" name="oldImage" value="<%= Annonceupdate.photo%>">
                        <legend>Photo</legend>
                        <div class="input-group mb-3">
                            <label class="input-group-text" for="inputGroupFile01"> Ajouter photo de
                                Logement</label>
                            <input type="file" class="form-control" name="photo" id="inputGroupFile02" 
                                placeholder="Ajouter  photo" required>

                        </div>
                        </fieldest>
                </section>
                <section class="border">
                    <fieldset>
                        <legend>Régles</legend>
                        <div class="input-group mb-3" required>

                            <input type="checkbox" name="sport" value="Wifi"> &thinsp;
                            📶 Wifi &thinsp;&thinsp;&thinsp;&thinsp;
                            <input type="checkbox" name="sport" value="Meublé"> &thinsp;
                            🛋️ Meublé &thinsp;&thinsp;&thinsp;&thinsp;
                            <input type="checkbox" name="sport" value="Machine">&thinsp;
                            🧦 Machine &agrave; laver &thinsp;&thinsp;&thinsp;&thinsp;
                            <input type="checkbox" name="sport" value="jardin">&thinsp;
                            🌳 Jardin <br />


                        </div>
                        </fieldest>
                </section>

                <button type="submit" class="btn btn-4  btn btn-success d-grid gap-2 col-3 mx-auto" class="tt">Modifier</button>
            </form>

        </div>

    </body>

    <%- include('parts/footer.ejs')%>